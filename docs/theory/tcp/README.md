# TCP 핵심 개념 정리

1. TCP 연결(3-Way Handshake)

* TCP는 클라이언트와 서버 간에 신뢰성 있는 연결을 설정하여 데이터 전송을 시작한다.
* 연결은 다음 3단계를 통해 성립한다:

    1. 클라이언트 → 서버: SYN
    2. 서버 → 클라이언트: SYN + ACK
    3. 클라이언트 → 서버: ACK

2. TCP 연결 식별 (Socket 4-Tuple)

* 하나의 TCP 연결은 다음 4가지 정보 조합으로 고유하게 식별된다:

    * Source IP
    * Source Port
    * Destination IP
    * Destination Port

3. 바이트 스트림 모델

* TCP는 데이터를 메시지 단위가 아닌 연속된 바이트 흐름으로 전송한다.
* 즉, TCP 자체는 “요청/응답” 개념을 이해하지 않는다.
* 메시지 경계(예: HTTP 요청 구분)는 상위 프로토콜이 담당한다.

4. ACK의 역할

* ACK는 "몇 번째 바이트까지 정상 수신했는지"를 나타내는 확인 응답이다.
* 데이터의 신뢰성과 순서 보장을 위한 용도로 사용된다.
* ACK는 요청이나 응답을 식별하는 용도가 아니다.

5. OS 소켓 버퍼 구조

* 각 TCP 연결에는 OS 커널이 관리하는 두 개의 버퍼가 존재한다:

    * Receive Buffer: 네트워크에서 받은 데이터를 저장
    * Send Buffer: 애플리케이션이 전송할 데이터를 임시 저장
* 애플리케이션은 버퍼를 통해 데이터를 송수신하며, TCP는 재전송, 순서 정렬, 손실 복구를 자동 처리한다.

6. TCP의 역할 요약

* 순서 보장: 데이터를 전송 순서대로 상대에게 전달
* 신뢰성 보장: 손실된 데이터는 재전송
* 흐름 제어: 수신 측 처리 속도에 맞춰 전송량 조절
* 혼잡 제어: 네트워크 혼잡 상태에서 전송 속도 조절

7. 상위 프로토콜과의 관계

* TCP는 단순히 바이트 스트림을 안정적으로 전달하는 역할만 담당한다.
* HTTP, DB 프로토콜 등은 TCP 스트림에서 데이터를 해석하여 요청/응답 단위로 구분한다.

8. 요약

* TCP는 연결형, 신뢰성 보장, 순서 보장 기반의 바이트 스트림 프로토콜이다.
* 소켓 연결 자체는 4-Tuple로 구분되며, 데이터는 OS 버퍼를 통해 읽고 쓴다.
* 요청과 응답의 의미는 TCP가 아니라 상위 프로토콜에서 결정된다.
